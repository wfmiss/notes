---
title: 变量的存储类别及作用域
date: 2022-03-23 14:30:00
permalink: /c/note8/
author: 
    name: eric
    href: https://wfmiss.cn
---
# 变量的存储类别及作用域

## 一、变量的作用域：存在空间性指变量在程序中的有效范围

**局部变量、全局变量**

1、局（内）部变量：在函数内（复合语句内）定义的变量、它只在本函数内（复合语句内）有效。

**知识点：**

- 生存期是该语块、进入语块时获得内存，仅能由语块语句访问，退出语句块时释放内存，不再有效；【随用随分配，用完就释放】
- 定义时不会自动初始化，除非程序员指定初值；
- 并列语句块各自定义的同名变量互不干扰，不同函数可以有相同变量名；
- 形参和实参可以同名；
- 形参也是局部变量；
- 主函数里的变量也是局部变量；
- **复合语句里定义的变量也是局部变量；复合语句的局部变量和本函数的局部变量同名时，本函数的局部变量不起作用。【内部的优先】**

2、全（外）局变量：在所有函数之外定义的变量

- 生存期是整个程序，从程序运行起占内存，程序退出时释放内存；
- 有效范围是从定义变量的位置开始到本程序结束；
- 全局变量必须在所有函数之外定义，且只能定义一次，默认初值为0；
- 可以通过声明一个**extern的全局变量扩张全局变量的作用域**，也可以通过定义一个**static的全局变量限制这种扩展**；
- **全局变量增加函数间数据联系、函数只能返回一个值，可用影响全局变量的方式带回给主函数多个值**；
- 全局变量会降低程序的清晰性；因为所有函数都能影响变量的值；

## 二、变量的生存期：存在的时间性

**静态存储和动态存储**

静态存储区：全局变量、局部静态变量；编译时分配内存，初值为0；初始化只有一次，执行完不释放，程序结束释放。

动态存储区：局部变量；随用随分配，用完就释放；初值为随机数，初始化可以多次

1、动态存储变量：数据类型 变量名表；

- 进入语句块时自动申请内存，退出时自动释放内存；
- 未赋初值时，其值不确定，每次调用重新赋值；
- 局部变量（不含静态局部变量）、形参

2、静态存储变量（static）：static 数据类型 变量名表；

- 局部静态变量编译时赋初值一次，以后每次调用不再重新赋初值，而是保留上一次函数调用结束时的值；
- 局部静态变量定义时不赋初值则自动赋初值0；
- 全局变量、静态局部变量

## 三、C语言的存储类别

1、auto型（自动变量）【缺省】

2、static型（静态变量）
3、register型（寄存器变量）：为了提高某些变量和函数形参的存取速度，c允许将局部变量的值存在CPU寄存器中，不用去内存取数据

4、extern型（外部变量）：如果需要用它文件中的全局变量，则需在文本中使用`extern int x;`说明一下。【扩展作用域】

**注意：**

- 只有局部自动变量和形参能作为寄存器变量，静态变量不可以；
- 寄存器数目有限，不能定义任意多个寄存器变量；
- 只有int、char和指针类型变量可以定义为寄存器型；
- 一个变量只能声明一个存储类别；
- extern只能用来说明变量，不能用来定义变量。`extern int a=1;×错误`

**此节未完，将于2022年6月后继续更新……**
